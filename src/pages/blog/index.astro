---
// LAYOUTS
import Layout from "@/layouts/layout/index.astro"

// COMPONENTS
import Header from "@/components/common/header/index.jsx"
import Footer from "@/components/common/footer/index.astro"
import Blogs from "@/components/blog/all/index.astro"

// CONSTANTS
import { CDN_LINK } from "../../constants/images"

// FETCH URL FROM SERVER AND DISPLAY THE DATA
const data = await fetch("https://staging.api.blupp.co/blogs")
const data_json = await data.json()
if( data.status !== 200 ){

    return Astro.redirect("/")

}
const blog = data_json.data.blogs

// META
const meta = data_json.data.meta_tags
---
<Layout
    title={ meta.title }
    description={ meta.description }
    image={ CDN_LINK + meta.cover }
>
	<Header client:load />
	<Blogs blog= { blog } />
	<Footer />
</Layout>
