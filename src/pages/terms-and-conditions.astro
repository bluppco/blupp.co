---
// IMPORTS MARKED
import { marked } from "marked"

// IMPORTING ASTRO LAYOUTS
import Layout from "../layouts/Layout.astro"
import Container from "@/layouts/Container.astro"

// IMPORTS ASTRO COMPONENTS
import HomeHeader from "@/components/header/HomeHeader.astro"
import Footer from "@/components/Footer.astro"

// IMPORTS ASTRO ATOMS
import HeadingOne from "@/atoms/headings/one/index.astro"

// NETWORK CALL
const data = await fetch( "https://staging.api.blupp.co/pages/terms-and-conditions" )
const data_json = await data.json()

if( data.status !== 200 ){

    return Astro.redirect("/")

}

let content = data_json.data.static.md

const html = marked.parse( content )
const meta = data_json.data.meta
---
<Layout
	title={ meta.title }
	description={ meta.description}
	image={ meta.cover }
>
    <HomeHeader />
    <Container>
        <HeadingOne>Terms and conditions</HeadingOne>
        <section set:html={ html } class="markdown" />
	</Container>
	<Footer />
</Layout>
